<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirection Snapchat</title>
    <script>
        // Détection de l'appareil
        function detectDevice() {
            const userAgent = navigator.userAgent || navigator.vendor || window.opera;
            if (/android/i.test(userAgent)) {
                return 'android';
            }
            if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                return 'ios';
            }
            return 'desktop';
        }

        // Fonction de redirection
        function redirect() {
            const params = new URLSearchParams(window.location.search);
            const snapUrl = params.get('url');

            if (!snapUrl) {
                alert("Aucune URL Snapchat fournie.");
                return;
            }

            const device = detectDevice();
            let redirectUrl;

            if (device === 'ios') {
                redirectUrl = `snapchat://unlock/?type=SNAPCODE&uuid=${extractUUID(snapUrl)}&metadata=01`;
            } else if (device === 'android') {
                redirectUrl = `intent://unlock/?type=SNAPCODE&uuid=${extractUUID(snapUrl)}&metadata=01#Intent;scheme=snapchat;package=com.snapchat.android;end;`;
            } else {
                redirectUrl = snapUrl; // Redirection web pour les navigateurs de bureau
            }

            // Exécuter la redirection après un délai
            setTimeout(() => {
                window.location.href = redirectUrl;
            }, 500);
        }

        // Extraire l'UUID de l'URL Snapchat
        function extractUUID(url) {
            const match = url.match(/uuid=([a-z0-9]+)/i);
            return match ? match[1] : '';
        }

        // Lancer la redirection lorsque la page est chargée
        document.addEventListener('DOMContentLoaded', redirect);
    </script>
</head>
<body>
    <h1>Redirection en cours...</h1>
    <p>Veuillez patienter pendant que nous vous redirigeons vers Snapchat.</p>
</body>
</html>
